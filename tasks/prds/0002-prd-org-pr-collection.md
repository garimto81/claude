# PRD-0002: 조직 전체 레포 PR 수집 및 Slack List 통합

**버전**: 1.0
**작성일**: 2025-12-23
**이슈**: [#37](https://github.com/garimto81/claude/issues/37)

---

## 1. 개요

### 1.1 목적
garimto81 조직의 모든 레포에서 PR 정보를 자동 수집하고, 표준화된 JSON 형식으로 변환 후 Slack List에 통합 업데이트

### 1.2 배경
- **현재 (v1.2)**: 단일 레포 PR 머지 시 자동 Slack List 업데이트
- **한계**: 다른 레포의 PR 정보는 수동 확인 필요
- **필요**: 조직 전체 개발 현황의 통합 가시성

---

## 2. 시스템 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                    garimto81 Organization                        │
│  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐                │
│  │ repo1  │  │ repo2  │  │ repo3  │  │  ...   │                │
│  └───┬────┘  └───┬────┘  └───┬────┘  └───┬────┘                │
│      │           │           │           │                      │
│      └───────────┴───────────┴───────────┘                      │
│                         │                                        │
│                         ▼                                        │
│              ┌─────────────────────┐                            │
│              │   GitHub Actions    │                            │
│              │   (매일 09:00 KST)  │                            │
│              └──────────┬──────────┘                            │
│                         │                                        │
│                         ▼                                        │
│              ┌─────────────────────┐                            │
│              │  collect_org_prs.sh │                            │
│              │  - 레포 목록 조회   │                            │
│              │  - PR 정보 수집     │                            │
│              │  - JSON 변환        │                            │
│              └──────────┬──────────┘                            │
│                         │                                        │
│                         ▼                                        │
│              ┌─────────────────────┐                            │
│              │   org-prs.json      │                            │
│              │   (표준 스키마)     │                            │
│              └──────────┬──────────┘                            │
│                         │                                        │
│                         ▼                                        │
│              ┌─────────────────────┐                            │
│              │   Slack List API    │                            │
│              │   - 항목 조회       │                            │
│              │   - 생성/업데이트   │                            │
│              └─────────────────────┘                            │
└─────────────────────────────────────────────────────────────────┘
```

---

## 3. JSON 표준 스키마

```json
{
  "version": "1.0",
  "metadata": {
    "organization": "garimto81",
    "collected_at": "2025-12-23T09:00:00+09:00",
    "total_repos": 5,
    "total_prs": 12
  },
  "repositories": [
    {
      "name": "claude",
      "url": "https://github.com/garimto81/claude",
      "prs": [
        {
          "number": 36,
          "title": "feat: add Slack List Sync",
          "prd_id": "PRD-0001",
          "issue_number": 37,
          "merged_at": "2025-12-22T09:37:41Z",
          "checklist": {
            "path": "docs/checklists/PRD-0001.md",
            "total": 7,
            "completed": 7,
            "progress": 100
          }
        }
      ]
    }
  ]
}
```

---

## 4. 기능 요구사항

### 4.1 조직 레포 수집
| ID | 요구사항 | 우선순위 |
|----|----------|----------|
| FR-01 | 조직 전체 레포 목록 조회 | 필수 |
| FR-02 | 비공개 레포 포함 옵션 | 권장 |
| FR-03 | 레포 필터링 (archived 제외) | 필수 |

### 4.2 PR 정보 수집
| ID | 요구사항 | 우선순위 |
|----|----------|----------|
| FR-04 | merged 상태 PR만 수집 | 필수 |
| FR-05 | 최근 30일 PR 필터링 | 권장 |
| FR-06 | PRD ID 자동 추출 | 필수 |
| FR-07 | Issue 번호 자동 추출 | 필수 |

### 4.3 Slack List 연동
| ID | 요구사항 | 우선순위 |
|----|----------|----------|
| FR-08 | 기존 List 구조 활용 | 필수 |
| FR-09 | 레포별 항목 생성 | 필수 |
| FR-10 | 진행률 프로그레스 바 | 필수 |
| FR-11 | 마지막 업데이트 일시 | 필수 |

### 4.4 자동화
| ID | 요구사항 | 우선순위 |
|----|----------|----------|
| FR-12 | 매일 자동 실행 | 필수 |
| FR-13 | 수동 실행 트리거 | 권장 |
| FR-14 | 실행 결과 로깅 | 필수 |

---

## 5. 비기능 요구사항

| ID | 요구사항 | 기준 |
|----|----------|------|
| NFR-01 | 실행 시간 | < 5분 |
| NFR-02 | API Rate Limit | GitHub 5000/hr, Slack 50/min |
| NFR-03 | 에러 복구 | 3회 재시도 |

---

## 6. Slack List 컬럼 매핑

| 컬럼 | ID | 내용 |
|------|-----|------|
| 제목 | Col0A4WG2LPHA | 레포 이름 |
| 진행률 | Col0A55RYJHEV | ████░░░░░░ 60% |
| 비고 | Col0A4WG5SFD2 | 진행중 항목 목록 |
| 마지막 업데이트 | Col0A4ZL4THPU | 2025-12-23 |

---

## 7. 일정

| Phase | 내용 | 예상 기간 |
|-------|------|----------|
| Phase 1 | 설계 및 준비 | 1일 |
| Phase 2 | 핵심 구현 | 2일 |
| Phase 3 | Slack 연동 | 1일 |
| Phase 4 | 자동화 | 1일 |
| Phase 5 | 검증 | 1일 |

---

## 8. 참조

- 기존 구현: `.github/workflows/slack-list-sync.yml`
- 표준 문서: `.github/CHECKLIST_STANDARD.md`
- 관련 프로젝트: `slakc_list/`
