# Auto Completion Workflow

자동 완성 기반 완전 자동화 워크플로우 가이드입니다.

**Version**: 1.1.0 | **Date**: 2025-12-30

---

## 개요

사용자 요청 하나로 전체 워크플로우를 **자동 완료**합니다. 중간 승인 없이 끝까지 실행됩니다.

```
┌─────────────────────────────────────────────────────────────────┐
│                    자동 완성 워크플로우                          │
├─────────────────────────────────────────────────────────────────┤
│  요청 입력 → 자동 분석 → 자동 실행 → 자동 검증 → 완료 보고      │
│                    (사용자 개입 없음)                            │
└─────────────────────────────────────────────────────────────────┘
```

### 기존 방식 vs 자동 완성

| 기존 | 자동 완성 |
|------|----------|
| 작업 → 제안 → **[선택]** → 실행 | 요청 → **자동 완료** |
| 매 단계 승인 필요 | 승인 없이 끝까지 |
| 수동 워크플로우 | 완전 자율 실행 |

---

## 핵심 원칙

| 원칙 | 설명 |
|------|------|
| **완전 자동화** | 요청 하나로 끝까지 실행 |
| **자율 판단** | 다음 단계를 스스로 결정 |
| **실패 복구** | 에러 시 자동 재시도/대안 실행 |
| **결과 보고** | 완료 후 요약 리포트 제공 |

---

## 구현 방식

### 1. 자동 완성 체인 (Auto-Completion Chain)

요청을 받으면 다음 단계를 **자동 판단하고 실행**합니다.

```
┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐
│  요청    │────▶│  분석    │────▶│  실행    │────▶│  검증    │
│          │     │  (자동)  │     │  (자동)  │     │  (자동)  │
└──────────┘     └──────────┘     └──────────┘     └──────────┘
                      │               │               │
                      ▼               ▼               ▼
                 다음 단계       다음 단계       완료 보고
                 자동 결정       자동 실행
```

#### 자동 실행 체인

| 단계 | 자동 실행 내용 |
|------|---------------|
| 1. 분석 | 요청 파악 → 필요한 작업 목록 생성 |
| 2. 준비 | 브랜치 생성, 환경 확인 |
| 3. 구현 | 코드 작성/수정 (TDD 포함) |
| 4. 검증 | 테스트 실행, 린트 검사 |
| 5. 완료 | 커밋, PR 생성 (설정에 따라) |

---

### 2. Hook 기반 자동 트리거

이벤트 발생 시 **다음 작업을 자동 실행**합니다.

```
┌──────────┐     ┌──────────┐     ┌──────────┐
│  이벤트  │────▶│   Hook   │────▶│  자동    │
│  발생    │     │  트리거  │     │  실행    │
└──────────┘     └──────────┘     └──────────┘
```

#### 자동 실행 규칙

| 이벤트 | 자동 실행 |
|--------|----------|
| 코드 수정 완료 | → 테스트 자동 실행 |
| 테스트 통과 | → 자동 커밋 |
| 테스트 실패 | → 자동 수정 시도 |
| 커밋 완료 | → PR 자동 생성 (옵션) |
| 에러 발생 | → 자동 디버깅 시도 |

#### 설정 위치

```
.claude/settings.json → hooks 섹션
```

---

### 3. 자율 에이전트 모드

완전 자율 실행 모드로, 작업 완료까지 **스스로 판단하고 실행**합니다.

```
┌─────────────────────────────────────────┐
│           자율 실행 로직                 │
├─────────────────────────────────────────┤
│  1. 요청 분석 → 작업 계획 수립           │
│  2. 계획대로 순차 실행                   │
│  3. 실패 시 → 대안 자동 탐색/실행        │
│  4. 완료 시 → 결과 리포트 생성           │
└─────────────────────────────────────────┘
```

#### 실패 복구 전략

| 실패 유형 | 자동 복구 |
|----------|----------|
| 테스트 실패 | 코드 수정 후 재실행 |
| 린트 에러 | 자동 수정 (`--fix`) |
| 충돌 발생 | 리베이스 시도 |
| 빌드 실패 | 의존성 확인/설치 |

---

## 워크플로우별 자동 실행

### 코드 개발 워크플로우 (완전 자동)

```
요청: "로그인 기능 추가해줘"
         │
         ▼
┌─────────────────────────────────────────────────────────┐
│                    자동 실행 시작                        │
├─────────────────────────────────────────────────────────┤
│  1. 코드베이스 분석 (자동)                               │
│  2. 이슈 생성 + 브랜치 생성 (자동)                       │
│  3. 테스트 작성 → 구현 → 테스트 통과 (TDD 자동)          │
│  4. 린트/테스트 검사 (자동)                              │
│  5. 커밋 + PR 생성 (자동)                               │
└─────────────────────────────────────────────────────────┘
         │
         ▼
    완료 리포트
```

**실행 예시:**
```
사용자: "로그인 기능 추가해줘"
Claude: [자동 실행 중...]
        ✓ 분석 완료 - 인증 모듈 필요
        ✓ 브랜치 생성 - feat/login-feature
        ✓ 테스트 작성 - 3개 테스트 케이스
        ✓ 구현 완료 - src/auth/login.py
        ✓ 테스트 통과 - 3/3
        ✓ 커밋 완료 - feat: 로그인 기능 추가
        ✓ PR 생성 - #45

        📋 완료 리포트:
        - 변경 파일: 4개
        - 테스트: 3개 추가
        - PR: https://github.com/.../pull/45
```

### 문서 작성 워크플로우 (완전 자동)

```
요청: "API 문서 작성해줘"
         │
         ▼
┌─────────────────────────────────────────────────────────┐
│  1. 기존 문서 스캔 (자동)                                │
│  2. 코드에서 API 추출 (자동)                             │
│  3. 템플릿 적용 + 문서 생성 (자동)                       │
│  4. 커밋 (자동)                                         │
└─────────────────────────────────────────────────────────┘
```

### 버그 수정 워크플로우 (완전 자동)

```
요청: "#123 이슈 수정해줘"
         │
         ▼
┌─────────────────────────────────────────────────────────┐
│  1. 이슈 분석 (자동)                                     │
│  2. 원인 파악 + 영향 범위 확인 (자동)                    │
│  3. 수정 + 테스트 (자동)                                 │
│  4. 커밋 + PR + 이슈 연결 (자동)                         │
└─────────────────────────────────────────────────────────┘
```

---

## 완료 리포트 형식

### 기본 형식

```
📋 자동 완료 리포트

✅ 완료된 작업:
   - [작업 1]
   - [작업 2]
   - [작업 3]

📊 결과:
   - 변경 파일: N개
   - 테스트: N개 통과
   - 커밋: [해시]
   - PR: [URL] (있는 경우)

⏱️ 소요 시간: Nm Ns
```

### 예시

```
📋 자동 완료 리포트

✅ 완료된 작업:
   - 코드베이스 분석
   - feat/login 브랜치 생성
   - 테스트 3개 작성
   - 로그인 기능 구현
   - 린트/테스트 통과
   - 커밋 완료
   - PR #45 생성

📊 결과:
   - 변경 파일: 4개
   - 테스트: 3/3 통과
   - 커밋: abc1234
   - PR: https://github.com/user/repo/pull/45

⏱️ 소요 시간: 2m 34s
```

---

## 설정

### 자동 완성 설정

```json
// .claude/settings.json
{
  "autoCompletion": {
    "enabled": true,
    "autoCommit": true,
    "autoPR": false,
    "autoTest": true,
    "autoFix": true,
    "maxRetries": 3
  }
}
```

### 자동화 레벨

| 레벨 | 설명 |
|------|------|
| `full` | 모든 단계 자동 실행 (커밋, PR 포함) |
| `safe` | PR 전까지 자동 실행 (기본값) |
| `minimal` | 구현만 자동, 커밋은 수동 |

---

## 참고 자료

### 외부 리소스

- [Anthropic - Claude Code Best Practices](https://www.anthropic.com/engineering/claude-code-best-practices)
- [Claude Code Hooks 활용 가이드](https://medium.com/@joe.njenga/use-claude-code-hooks-newest-feature-to-fully-automate-your-workflow-341b9400cfbe)
- [Prompt Chaining Guide](https://www.promptingguide.ai/techniques/prompt_chaining)
- [Building Effective Agents](https://www.anthropic.com/research/building-effective-agents)

### 커뮤니티 워크플로우

- [OneRedOak/claude-code-workflows](https://github.com/OneRedOak/claude-code-workflows)
- [wshobson/agents](https://github.com/wshobson/agents)
- [shinpr/claude-code-workflows](https://github.com/shinpr/claude-code-workflows)

---

## 핵심 커맨드

### /auto - 자동 완성 반복 루프

```bash
# 기본 실행 (작업 자동 탐색)
/auto

# 특정 작업으로 시작
/auto "로그인 기능 추가"

# 이슈 기반 실행
/auto #123 #124 #125

# 최대 3개 작업 후 중단
/auto --max 3
```

**상세**: [`.claude/commands/auto.md`](../.claude/commands/auto.md)

---

## 로드맵

| 단계 | 내용 | 상태 |
|------|------|------|
| 1단계 | `/auto` 커맨드 생성 | ✅ 완료 |
| 2단계 | Hook 기반 자동 트리거 | 계획 |
| 3단계 | 실패 자동 복구 로직 | 계획 |
| 4단계 | 완료 리포트 생성기 | 계획 |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.1.0 | 2025-12-30 | 자동 완성 (완전 자동화) 방식으로 전환 |
| 1.0.0 | 2025-12-30 | 초기 문서 작성 |
