# [PRD-0001] VSeeFace 버튜버 기능 Checklist

**PRD**: PRD-0001
**Version**: 2.0.0
**Last Updated**: 2026-01-05
**Status**: In Progress

---

## Summary

| Metric | Value |
|--------|-------|
| **Total Items** | 11 |
| **Completed** | 9 |
| **In Progress** | 0 |
| **Pending** | 2 |
| **Progress** | 81.8% |
| **Current Phase** | Phase 1-2 (VSeeFace 활성화) |

---

## 프로젝트 범위 (v2.0.0 업데이트)

**핵심 목표**: VSeeFace 아바타 활성화 및 VMC Protocol 연동

**범위 내:**
- VSeeFace VMC Protocol 연동 (BlendShape 송수신)
- 표정 제어 (AvatarController)
- OBS 오버레이 기본 설정

**범위 외 (아카이빙됨):**
- ~~GitHub Webhook 연동~~ → archive/
- ~~YouTube 채팅 감정 분석~~ → archive/
- ~~stream-server~~ → archive/

---

## Phase 1: VSeeFace 기본 연동

**목표**: VMC Protocol을 통한 VSeeFace 연결 및 BlendShape 데이터 수신

**완료 기준**:
- VSeeFace 실행 시 VMC Client 자동 연결
- BlendShape 데이터 송수신 동작
- 단위 테스트 커버리지 > 80%

### 작업 항목

- [x] **VSeeFace 설치 및 설정 가이드 작성**
  - VSeeFace v1.13.38+ 다운로드 및 설치
  - VMC Protocol 활성화 (Port 39539)
  - 설정 가이드 문서 작성 (docs/VSEFACE_SETUP.md)

- [ ] **VRoid Hub 무료 아바타 선택 및 다운로드**
  - VRoid Hub에서 프로그래머/코더 컨셉 아바타 검색
  - 3개 후보 선정 및 다운로드 (VRM 파일)
  - 최종 1개 아바타 선택

- [x] **packages/vtuber 패키지 생성** (#75)
  - pnpm workspace에 packages/vtuber 추가
  - package.json 생성 (의존성: osc, @youtuber/shared)
  - tsconfig.json 설정
  - 기본 디렉토리 구조 생성 (src/, tests/)

- [x] **VMC Protocol 클라이언트 구현** (#77)
  - vmc-client.ts 구현 (VMCClient 클래스)
  - connect(), disconnect(), onBlendShapeUpdate(), sendExpression() 메서드
  - BlendShape 데이터 수신 (Joy, Angry, Sorrow, Fun)
  - 연결 상태 모니터링 (health check 5초 간격)

- [x] **VSeeFace 연결 테스트 작성** (#77)
  - vmc-client.test.ts 단위 테스트
  - VMC Client 연결/해제 테스트
  - BlendShape 데이터 파싱 테스트
  - 커버리지 > 80%

- [x] **WebSocket 메시지 타입 추가 (shared)** (#79)
  - packages/shared/src/types/index.ts 수정
  - VTuberExpressionPayload, VTuberStatusPayload 인터페이스 정의

---

## Phase 2: 표정 제어 및 OBS 연동

**목표**: 아바타 표정 제어 및 OBS 오버레이 기본 설정

**완료 기준**:
- AvatarController 동작 확인
- VSeeFace 투명 배경 설정 가이드
- OBS Window Capture 설정 가이드

### 작업 항목

- [x] **AvatarController 클래스 구현** (#107)
  - packages/vtuber/src/avatar-controller.ts 생성
  - setExpression(), queueExpression(), getCurrentExpression() 메서드
  - 표정 우선순위 큐 (동시 이벤트 처리)
  - 표정 지속 시간 관리 (duration)

- [x] **AvatarController 테스트 작성**
  - avatar-controller.test.ts 단위 테스트
  - 커버리지 > 80%

- [x] **VSeeFace Window Capture 가이드**
  - VSeeFace "Transparent Background" 활성화 가이드
  - OBS Window Capture 추가 가이드
  - 설정 가이드 문서 작성 (docs/OBS_SETUP.md)

- [ ] **VSeeFace 실행 연동 테스트**
  - VSeeFace.exe 실행
  - VMC Client 연결 테스트
  - BlendShape 데이터 실시간 수신 확인

---

## Archived (2026-01-05)

다음 기능들은 범위 외로 아카이빙되었습니다:

### ~~Phase 3: GitHub 연동~~ → `archive/stream-server/`
- GitHub Webhook 처리
- ReactionMapper (이벤트 → 표정 매핑)
- WebSocket 서버

### ~~Phase 4: 채팅 상호작용~~ → `archive/stream-server/`
- YouTube 채팅 연동
- 감정 분석 → 표정 변환

---

## 참고 자료

- **VSeeFace 공식**: https://www.vseeface.icu/
- **VMC Protocol**: https://protocol.vmc.info/
- **VRoid Hub**: https://hub.vroid.com/

---

## 변경 이력

| 날짜 | 버전 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 2026-01-04 | 1.0.0 | Checklist 초안 작성 | Claude |
| 2026-01-05 | 1.1.0 | Phase 1-3 실제 구현 상태 반영 | Claude |
| 2026-01-05 | 2.0.0 | **범위 축소**: Phase 3-4 아카이빙, VSeeFace 활성화 집중 | Claude |

---

**다음 단계**: VSeeFace.exe 실행 및 VMC Client 연결 테스트
